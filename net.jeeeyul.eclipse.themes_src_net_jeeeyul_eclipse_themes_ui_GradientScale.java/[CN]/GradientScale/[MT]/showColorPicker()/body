{
  ColorPicker colorPicker=new ColorPicker(getShell());
  colorPicker.setContinuosSelectionHandler(new Procedure1<HSB>(){
    @Override public void apply(    HSB arg0){
      GradientScale.this.selectedItem.setColor(arg0);
    }
  }
);
  HSB oldColor=this.selectedItem.getColor();
  colorPicker.setSelection(oldColor);
  if (colorPicker.open() == IDialogConstants.OK_ID) {
    this.selectedItem.setColor(colorPicker.getSelection());
  }
 else {
    this.selectedItem.setColor(oldColor);
  }
}
