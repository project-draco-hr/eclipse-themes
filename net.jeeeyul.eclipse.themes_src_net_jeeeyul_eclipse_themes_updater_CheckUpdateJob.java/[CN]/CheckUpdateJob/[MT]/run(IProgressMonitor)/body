{
  try {
    URI updateSite=new URI("https://raw.github.com/jeeeyul/eclipse-themes/master/net.jeeeyul.eclipse.themes.updatesite/");
    ProvisioningUI.getDefaultUI().loadMetadataRepository(updateSite,true,null);
    ProvisioningUI.getDefaultUI().loadArtifactRepository(updateSite,true,null);
    BundleContext context=ChromeThemeCore.getDefault().getBundle().getBundleContext();
    ServiceReference<IProvisioningAgentProvider> sr=context.getServiceReference(IProvisioningAgentProvider.class);
    IProvisioningAgentProvider agentProvider=context.getService(sr);
    URI p2InstanceURI=null;
    final IProvisioningAgent agent=agentProvider.createAgent(p2InstanceURI);
    IProfileRegistry regProfile=(IProfileRegistry)agent.getService(IProfileRegistry.SERVICE_NAME);
    IProfile profileSelf=regProfile.getProfile(IProfileRegistry.SELF);
    IQuery<IInstallableUnit> query=QueryUtil.createIUQuery("net.jeeeyul.eclipse.themes.feature.feature.group");
    IQueryResult<IInstallableUnit> result=profileSelf.query(query,new NullProgressMonitor());
    Iterator<IInstallableUnit> iter=result.iterator();
    while (iter.hasNext()) {
      System.out.println(iter.next().getId());
    }
    UpdateOperation operation=new UpdateOperation(ProvisioningUI.getDefaultUI().getSession(),result.toSet());
    IStatus resolveResult=operation.resolveModal(monitor);
    if (resolveResult.isOK()) {
      showNotification(operation);
    }
 else {
      System.out.println(resolveResult.getMessage());
    }
  }
 catch (  Exception e) {
    return new Status(IStatus.WARNING,ChromeThemeCore.PLUGIN_ID,"Could not check new update.",e);
  }
  return Status.OK_STATUS;
}
