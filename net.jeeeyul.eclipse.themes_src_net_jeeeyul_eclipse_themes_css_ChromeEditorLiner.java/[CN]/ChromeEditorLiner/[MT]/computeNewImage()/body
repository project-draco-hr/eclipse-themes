{
  int lineOffset=computeLineOffset();
  imageInfo.setOffset(lineOffset);
  imageInfo.setColor(lineColor);
  imageInfo.setUseDash(dash);
  Image result=new Image(text.getDisplay(),20,text.getLineHeight());
  GC gc=new GC(result);
  gc.setBackground(text.getBackground());
  gc.fillRectangle(0,0,20,text.getLineHeight());
  if (lineColor != null) {
    gc.setForeground(lineColor);
  }
 else {
    gc.setForeground(text.getDisplay().getSystemColor(SWT.COLOR_BLACK));
  }
  if (dash) {
    gc.setLineStyle(SWT.LINE_DASH);
    gc.setLineDash(new int[]{2,2});
  }
  gc.drawLine(0,lineOffset - 1,20,lineOffset - 1);
  gc.dispose();
  return result;
}
