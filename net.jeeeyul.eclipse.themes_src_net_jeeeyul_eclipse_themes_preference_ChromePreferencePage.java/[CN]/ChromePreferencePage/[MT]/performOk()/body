{
  IPreferenceStore store=getPreferenceStore();
  float[] start=decorator.getStartHSB();
  store.setValue("chrome-active-start-hue",start[0]);
  store.setValue("chrome-active-start-saturation",start[1]);
  store.setValue("chrome-active-start-brightness",start[2]);
  float[] end=decorator.getEndHSB();
  store.setValue("chrome-active-end-hue",end[0]);
  store.setValue("chrome-active-end-saturation",end[1]);
  store.setValue("chrome-active-end-brightness",end[2]);
  store.setValue("chrome-auto-end-color",autoEndColorField.getSelection());
  store.setValue("chrome-lock-hue",lockHueField.getSelection());
  store.setValue(ChromeConstants.CRHOME_PART_CONTAINER_SASH_WIDTH,sashWidthScale.getSelection());
  store.setValue(ChromeConstants.CRHOME_PART_SHADOW,useShadowField.getSelection());
  if (thinSashButton.getSelection()) {
    store.setValue(ChromeConstants.CHROME_SASH_PRESET,ChromeConstants.CHROME_SASH_PRESET_THIN);
  }
 else   if (standardSashButton.getSelection()) {
    store.setValue(ChromeConstants.CHROME_SASH_PRESET,ChromeConstants.CHROME_SASH_PRESET_STANDARD);
  }
 else {
    store.setValue(ChromeConstants.CHROME_SASH_PRESET,ChromeConstants.CHROME_SASH_PRESET_ADVANCED);
  }
  Object data=fontPreviewLabel.getData();
  if (data instanceof FontData) {
    FontData fontData=(FontData)data;
    store.setValue(ChromeConstants.CHROME_PART_FONT_NAME,fontData.getName());
    store.setValue(ChromeConstants.CHROME_PART_FONT_SIZE,fontData.height);
  }
  store.setValue(ChromeConstants.CHROME_PART_FONT_SHADOW,usePartTextShadowButton.getSelection());
  try {
    workingCopyManager.applyChanges();
  }
 catch (  BackingStoreException e) {
    e.printStackTrace();
  }
  new RewriteChormeCSS().rewrite();
  return super.performOk();
}
